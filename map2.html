<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Heatmaps</title>
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
      #panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
    </style>
    <!-- Load API KEY -->
    <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmUz5sQxG_Fh39gX_ZWEr6oFLewa4wecc">
    </script>

    <!-- Load visualization library -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=visualization">
    </script>

    <script>
// Princeton Locations
var map, heatmapDownload, heatmapUpload;

var downloadData = [
{location: new google.maps.LatLng(40.347607,-74.6612695),  weight: 27680494},
{location: new google.maps.LatLng(40.33316,-74.657092),  weight: 146693556},
{location: new google.maps.LatLng(40.344822,-74.659381),  weight: 49477691},
{location: new google.maps.LatLng(40.348132,-74.662064),  weight: 19670021},
{location: new google.maps.LatLng(40.347374,-74.659319),  weight: 10759025},
{location: new google.maps.LatLng(40.346376,-74.655264),  weight: 2150516},
{location: new google.maps.LatLng(40.349499,-74.653675),  weight: 3216765},
{location: new google.maps.LatLng(40.344554,-74.654467),  weight: 34501177},
{location: new google.maps.LatLng(40.344198,-74.65148),  weight: 13455811},
{location: new google.maps.LatLng(40.346034,-74.650037),  weight: 214322},
{location: new google.maps.LatLng(40.346158,-74.657446),  weight: 12804977},
{location: new google.maps.LatLng(40.345234,-74.653857), weight: 2123747},
{location: new google.maps.LatLng(40.34349,-74.655985), weight: 85361826},
{location: new google.maps.LatLng(40.349757,-74.650351), weight: 498504},
{location: new google.maps.LatLng(40.346817,-74.660251), weight: 37814277},
{location: new google.maps.LatLng(40.344675,-74.65824),  weight: 3856663},
{location: new google.maps.LatLng(40.347142,-74.657859),  weight: 1894364},
{location: new google.maps.LatLng(40.340999,-74.657859),  weight: 30978669},
{location: new google.maps.LatLng(40.340801,-74.665806),  weight: 63251830},
{location: new google.maps.LatLng(40.34215,-74.660942),  weight: 47440616},
{location: new google.maps.LatLng(40.350481,-74.649161),  weight: 642372},
{location: new google.maps.LatLng(40.347482,-74.660188),  weight: 18660317},
{location: new google.maps.LatLng(40.348747,-74.658499),  weight: 2937295},
{location: new google.maps.LatLng(40.345865,-74.660676),  weight: 12686275},
{location: new google.maps.LatLng(40.345824,-74.65242), weight: 9517298},
{location: new google.maps.LatLng(40.332915,-74.657145),  weight: 107490088},
{location: new google.maps.LatLng(40.344453,-74.653287),  weight: 12166694},
{location: new google.maps.LatLng(40.350719,-74.650544),  weight: 37367374},
{location: new google.maps.LatLng(40.343447,-74.648701),  weight: 24290098},
{location: new google.maps.LatLng(40.345872,-74.660142),  weight: 17887097},
{location: new google.maps.LatLng(40.34613,-74.656942),  weight: 17830272},
{location: new google.maps.LatLng(40.348347,-74.654724),  weight: 2536677},
{location: new google.maps.LatLng(40.344716,-74.658261),  weight: 3935084},
{location: new google.maps.LatLng(40.344779,-74.656155),  weight: 4210776},
{location: new google.maps.LatLng(40.348716,-74.661314),  weight: 27868474},
{location: new google.maps.LatLng(40.341665,-74.660702),  weight: 19051766},
{location: new google.maps.LatLng(40.350347,-74.652729),  weight: 3813023},
{location: new google.maps.LatLng(40.347222,-74.655887),  weight: 744740},
{location: new google.maps.LatLng(40.346814,-74.655308),  weight: 1605436},
{location: new google.maps.LatLng(40.344,-74.657996),  weight: 806471},
{location: new google.maps.LatLng(40.347979,-74.659678),  weight: 128352712},
{location: new google.maps.LatLng(40.349529,-74.652725),  weight: 1668589},
{location: new google.maps.LatLng(40.344015,-74.656392),  weight: 8437796},
{location: new google.maps.LatLng(40.346253,-74.652731),  weight: 49086876},
{location: new google.maps.LatLng(40.350198,-74.656595),  weight: 29014286},
{location: new google.maps.LatLng(40.344007,-74.650778),  weight: 558322},
{location: new google.maps.LatLng(40.344924,-74.651786),  weight: 14861515},
{location: new google.maps.LatLng(40.349402,-74.65754),  weight: 1507654},
{location: new google.maps.LatLng(40.343253,-74.652591),  weight: 939866},
{location: new google.maps.LatLng(40.348673,-74.652458),  weight: 191345},
{location: new google.maps.LatLng(40.34884,-74.652207),  weight: 245464},
{location: new google.maps.LatLng(40.347725,-74.654035),  weight: 258293},
{location: new google.maps.LatLng(40.347069,-74.65402),  weight: 2522055},
{location: new google.maps.LatLng(40.348012,-74.652734),  weight: 203863},
{location: new google.maps.LatLng(40.348294,-74.651769),  weight: 2832742},
{location: new google.maps.LatLng(40.347103,-74.656707),  weight: 47332296},
{location: new google.maps.LatLng(40.343898,-74.647436),  weight: 203318},
{location: new google.maps.LatLng(40.349122,-74.660252),  weight: 1170271},
{location: new google.maps.LatLng(40.348855,-74.650101),  weight: 300856},
{location: new google.maps.LatLng(40.348961,-74.649517),  weight: 1596445},
{location: new google.maps.LatLng(40.34938,-74.658949),  weight: 656804},
{location: new google.maps.LatLng(40.348656,-74.65058),  weight: 424104},
{location: new google.maps.LatLng(40.348169,-74.652238),  weight: 233267},
{location: new google.maps.LatLng(40.348326,-74.651047),  weight: 82992},
{location: new google.maps.LatLng(40.34544,-74.65529),  weight: 45742234},
{location: new google.maps.LatLng(40.347745,-74.655352),  weight: 31758641},
{location: new google.maps.LatLng(40.348197,-74.663232),  weight: 9331665},
{location: new google.maps.LatLng(40.349647,-74.654714),  weight: 854736},
{location: new google.maps.LatLng(40.348708,-74.659391),  weight: 19104762},
{location: new google.maps.LatLng(40.348735,-74.660012),  weight: 5579603},
{location: new google.maps.LatLng(40.347704,-74.659195),  weight: 7297502},
{location: new google.maps.LatLng(40.347978,-74.657977),  weight: 6157027},
{location: new google.maps.LatLng(40.343597,-74.649973),  weight: 670585},
{location: new google.maps.LatLng(40.346549,-74.651659),  weight: 21520271},
{location: new google.maps.LatLng(40.346467,-74.657882),  weight: 168732},
{location: new google.maps.LatLng(40.345549,-74.657072),  weight: 15025184},
{location: new google.maps.LatLng(40.346685,-74.653631),  weight: 12062480},
{location: new google.maps.LatLng(40.346718,-74.656582),  weight: 1105675},
{location: new google.maps.LatLng(40.345817,-74.65654),  weight: 11865341},
{location: new google.maps.LatLng(40.345208,-74.655773),  weight: 12762314},
{location: new google.maps.LatLng(40.344775,-74.656991),  weight: 9624329},
{location: new google.maps.LatLng(40.344702,-74.656545),  weight: 535235},
{location: new google.maps.LatLng(40.346747,-74.658675),  weight: 392393}

];
var uploadData = [
{location: new google.maps.LatLng(40.347607,-74.6612695),  weight: 2527469},
{location: new google.maps.LatLng(40.33316,-74.657092),  weight: 18553342},
{location: new google.maps.LatLng(40.344822,-74.659381),  weight: 7245987},
{location: new google.maps.LatLng(40.348132,-74.662064),  weight: 1618747},
{location: new google.maps.LatLng(40.347374,-74.659319),  weight: 838315},
{location: new google.maps.LatLng(40.346376,-74.655264),  weight: 63088316},
{location: new google.maps.LatLng(40.349499,-74.653675),  weight: 43827680},
{location: new google.maps.LatLng(40.344554,-74.654467),  weight: 7917582},
{location: new google.maps.LatLng(40.344198,-74.65148),  weight: 3176918},
{location: new google.maps.LatLng(40.346034,-74.650037),  weight: 50337104},
{location: new google.maps.LatLng(40.346158,-74.657446),  weight: 899070},
{location: new google.maps.LatLng(40.345234,-74.653857),  weight: 3948203},
{location: new google.maps.LatLng(40.34349,-74.655985),  weight: 13467814},
{location: new google.maps.LatLng(40.349757,-74.650351),  weight: 9593478},
{location: new google.maps.LatLng(40.346817,-74.660251),  weight: 5165484},
{location: new google.maps.LatLng(40.344675,-74.65824),  weight: 991675},
{location: new google.maps.LatLng(40.347142,-74.657859),  weight: 27613948},
{location: new google.maps.LatLng(40.340999,-74.657859),  weight: 3874515},
{location: new google.maps.LatLng(40.340801,-74.665806),  weight: 11295513},
{location: new google.maps.LatLng(40.34215,-74.660942),  weight: 4602844},
{location: new google.maps.LatLng(40.350481,-74.649161),  weight: 209117},
{location: new google.maps.LatLng(40.347482,-74.660188),  weight: 2065292},
{location: new google.maps.LatLng(40.348747,-74.658499),  weight: 620149},
{location: new google.maps.LatLng(40.345865,-74.660676),  weight: 556836},
{location: new google.maps.LatLng(40.345824,-74.65242),  weight: 18334342},
{location: new google.maps.LatLng(40.332915,-74.657145),  weight: 12288520},
{location: new google.maps.LatLng(40.344453,-74.653287),  weight: 32390404},
{location: new google.maps.LatLng(40.350719,-74.650544),  weight: 29701414},
{location: new google.maps.LatLng(40.343447,-74.648701),  weight: 1830464},
{location: new google.maps.LatLng(40.345872,-74.660142),  weight: 1708958},
{location: new google.maps.LatLng(40.34613,-74.656942),  weight: 2420962},
{location: new google.maps.LatLng(40.348347,-74.654724),  weight: 30304641},
{location: new google.maps.LatLng(40.344716,-74.658261),  weight: 23807624},
{location: new google.maps.LatLng(40.344779,-74.656155),  weight: 1404103},
{location: new google.maps.LatLng(40.348716,-74.661314),  weight: 6000109},
{location: new google.maps.LatLng(40.341665,-74.660702),  weight: 2929380},
{location: new google.maps.LatLng(40.350347,-74.652729),  weight: 418145},
{location: new google.maps.LatLng(40.347222,-74.655887),  weight: 162192},
{location: new google.maps.LatLng(40.346814,-74.655308),  weight: 547585},
{location: new google.maps.LatLng(40.344,-74.657996),  weight: 6894182},
{location: new google.maps.LatLng(40.347979,-74.659678),  weight: 27913789},
{location: new google.maps.LatLng(40.349529,-74.652725),  weight: 20271988},
{location: new google.maps.LatLng(40.344015,-74.656392),  weight: 2645580},
{location: new google.maps.LatLng(40.346253,-74.652731),  weight: 3880335},
{location: new google.maps.LatLng(40.350198,-74.656595),  weight: 44347367},
{location: new google.maps.LatLng(40.344007,-74.650778),  weight: 4455640},
{location: new google.maps.LatLng(40.344924,-74.651786),  weight: 19875826},
{location: new google.maps.LatLng(40.349402,-74.65754),  weight: 0},
{location: new google.maps.LatLng(40.343253,-74.652591),  weight: 0},
{location: new google.maps.LatLng(40.348673,-74.652458),  weight: 4090098},
{location: new google.maps.LatLng(40.34884,-74.652207),  weight: 72762},
{location: new google.maps.LatLng(40.347725,-74.654035),  weight: 13317},
{location: new google.maps.LatLng(40.347069,-74.65402),  weight: 187905},
{location: new google.maps.LatLng(40.348012,-74.652734),  weight: 232957},
{location: new google.maps.LatLng(40.348294,-74.651769),  weight: 288154},
{location: new google.maps.LatLng(40.347103,-74.656707),  weight: 3911},
{location: new google.maps.LatLng(40.343898,-74.647436),  weight: 0},
{location: new google.maps.LatLng(40.349122,-74.660252),  weight: 0},
{location: new google.maps.LatLng(40.348855,-74.650101),  weight: 0},
{location: new google.maps.LatLng(40.348961,-74.649517),  weight: 93248},
{location: new google.maps.LatLng(40.34938,-74.658949),  weight: 0},
{location: new google.maps.LatLng(40.348656,-74.65058),  weight: 1716590},
{location: new google.maps.LatLng(40.348169,-74.652238),  weight: 3907},
{location: new google.maps.LatLng(40.348326,-74.651047),  weight: 93572},
{location: new google.maps.LatLng(40.34544,-74.65529),  weight: 22403},
{location: new google.maps.LatLng(40.347745,-74.655352),  weight: 0},
{location: new google.maps.LatLng(40.348197,-74.663232),  weight: 8900271},
{location: new google.maps.LatLng(40.349647,-74.654714),  weight: 0},
{location: new google.maps.LatLng(40.348708,-74.659391),  weight: 13950594},
{location: new google.maps.LatLng(40.348735,-74.660012),  weight: 0},
{location: new google.maps.LatLng(40.347704,-74.659195),  weight: 0},
{location: new google.maps.LatLng(40.347978,-74.657977),  weight: 144415},
{location: new google.maps.LatLng(40.343597,-74.649973),  weight: 46041},
{location: new google.maps.LatLng(40.346549,-74.651659),  weight: 3624},
{location: new google.maps.LatLng(40.346467,-74.657882),  weight: 28638719},
{location: new google.maps.LatLng(40.345549,-74.657072),  weight: 3361700},
{location: new google.maps.LatLng(40.346685,-74.653631),  weight: 413901},
{location: new google.maps.LatLng(40.346718,-74.656582),  weight: 33706089},
{location: new google.maps.LatLng(40.345817,-74.65654),  weight: 837671},
{location: new google.maps.LatLng(40.345208,-74.655773),  weight: 383798},
{location: new google.maps.LatLng(40.344775,-74.656991),  weight: 574416},
{location: new google.maps.LatLng(40.344702,-74.656545),  weight: 2715454},
{location: new google.maps.LatLng(40.346747,-74.658675),  weight: 8133816},
{location: new google.maps.LatLng(40.348355,-74.660629),  weight: 4015497},
{location: new google.maps.LatLng(40.348712,-74.653484),  weight: 6904560},
{location: new google.maps.LatLng(40.346307,-74.660997),  weight: 2696361},
{location: new google.maps.LatLng(40.345127,-74.656718),  weight: 547254},
{location: new google.maps.LatLng(40.344979,-74.655407),  weight: 110469},
{location: new google.maps.LatLng(40.3455,-74.655806),  weight: 841253},
{location: new google.maps.LatLng(40.345858,-74.656244),  weight: 1317412},
{location: new google.maps.LatLng(40.346433,-74.655946),  weight: 1082771},
{location: new google.maps.LatLng(40.347662,-74.654524),  weight: 140153}
];
var uploadGradient = [
    'rgba(0, 255, 255, 0)',
    'rgba(0, 255, 255, 1)',
    'rgba(0, 191, 255, 1)',
    'rgba(0, 127, 255, 1)',
    'rgba(0, 63, 255, 1)',
    'rgba(0, 0, 255, 1)',
    'rgba(0, 0, 223, 1)',
    'rgba(0, 0, 191, 1)',
    'rgba(0, 0, 159, 1)',
    'rgba(0, 0, 127, 1)',
    'rgba(63, 0, 91, 1)',
    'rgba(127, 0, 63, 1)',
    'rgba(191, 0, 31, 1)',
    'rgba(255, 0, 0, 1)'
];
function initialize() {
   //set the center to Princeton University
   var princetonU = new google.maps.LatLng(40.3456455,-74.6558775);
   //initialize the map window location
   var mapOptions = {
          center: princetonU,
          zoom: 15
        };

   map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

   var heatmapDownloadData = new google.maps.MVCArray(downloadData);
   var heatmapUploadData = new google.maps.MVCArray(uploadData);

   heatmapDownload = new google.maps.visualization.HeatmapLayer({
    data: heatmapDownloadData,
    radius: 35,
    maxIntensity: 100000000
   });

   heatmapUpload = new google.maps.visualization.HeatmapLayer({
    data: heatmapUploadData,
    radius: 35,
    //maxIntensity: 100000000,
    gradient: uploadGradient
   });

   heatmapDownload.setMap(map);
   heatmapUpload.setMap(map);
}

function toggleHeatmapDownload() {
  heatmapDownload.setMap(heatmapDownload.getMap() ? null : map);
}
function toggleHeatmapUpload() {
  heatmapUpload.setMap(heatmapUpload.getMap() ? null : map);
}

function changeOpacity() {
  heatmapDownload.set('opacity', heatmapDownload.get('opacity') ? null : 0.2);
  heatmapUpload.set('opacity', heatmapUpload.get('opacity') ? null : 0.2);
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>

  <body>
    <div id="panel">
      <button onclick="toggleHeatmapDownload()">Toggle Download Data</button>
      <button onclick="toggleHeatmapUpload()">Toggle Upload Data</button>
      <button onclick="changeOpacity()">Change opacity</button>
    </div>
    <div id="map-canvas"></div>
  </body>
</html>